<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
  <div><img id="logo" src="/assets/wclub/logo_light.png" alt="wClub" height="32"></div>
  <button id="theme-toggle">Switch Theme</button>
</div>
<link rel="icon" type="image/png" href="/assets/wclub/favicon_light.png">
<link rel="stylesheet" href="/assets/wclub/portal_theme.css">

{% set user = frappe.session.user %}
<h2>Coach Dashboard</h2>
<p>Signed in as: {{ user }}</p>
{% set classes = frappe.get_all("Class Session",
    filters={"coach": user},
    fields=["name","class_type","dojo","start","end","capacity"],
    order_by="start asc", limit=50) %}
<table class="table table-bordered">
  <thead><tr><th>Name</th><th>Type</th><th>Dojo</th><th>Start</th><th>End</th><th>Cap.</th></tr></thead>
  <tbody>
  {% for c in classes %}
  <tr>
    <td><a href="/app/class-session/{{ c.name }}">{{ c.name }}</a></td>
    <td>{{ c.class_type }}</td>
    <td>{{ c.dojo }}</td>
    <td>{{ c.start }}</td>
    <td>{{ c.end }}</td>
    <td>{{ c.capacity }}</td>
  </tr>
  {% else %}
  <tr><td colspan="6">No classes assigned.</td></tr>
  {% endfor %}
  </tbody>
</table>

<script>
(function(){
  function apply(theme){
    document.body.dataset.theme = theme;
    try {
      var link = document.querySelector('link[rel="icon"]');
      if (link) link.href = theme==='dark' ? '/assets/wclub/favicon_dark.png' : '/assets/wclub/favicon_light.png';
      var logo = document.getElementById('logo');
      if (logo) logo.src = theme==='dark' ? '/assets/wclub/logo_dark.png' : '/assets/wclub/logo_light.png';
    } catch(e) {}
    localStorage.setItem('wclub_theme', theme);
  }
  const saved = localStorage.getItem('wclub_theme') || 'light';
  document.addEventListener('DOMContentLoaded', function(){
    apply(saved);
    var btn = document.getElementById('theme-toggle');
    if(btn){ btn.addEventListener('click', function(){
      apply(document.body.dataset.theme==='dark' ? 'light' : 'dark');
    });}
  });
})();
</script>
