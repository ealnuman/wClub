<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
  <div><img id="logo" src="/assets/wclub/logo_light.png" alt="wClub" height="32"></div>
  <button id="theme-toggle">Switch Theme</button>
</div>
<link rel="icon" type="image/png" href="/assets/wclub/favicon_light.png">
<link rel="stylesheet" href="/assets/wclub/portal_theme.css">

{% set bookings = frappe.get_all("Booking", filters={"owner": frappe.session.user}, fields=["name","session","status","creation"], order_by="creation desc", limit=100) %}
<h2>My Bookings</h2>
<table class="table table-bordered">
<thead><tr><th>Name</th><th>Session</th><th>Status</th><th>Created</th></tr></thead>
<tbody>
{% for b in bookings %}
<tr>
  <td><a href="/app/booking/{{ b.name }}">{{ b.name }}</a></td>
  <td>{{ b.session }}</td>
  <td>{{ b.status }}</td>
  <td>{{ b.creation }}</td>
</tr>
{% else %}
<tr><td colspan="4">No bookings yet.</td></tr>
{% endfor %}
</tbody>
</table>
<p><a href="/portal/book">Create a new booking</a> â€¢ <a href="/portal/cancel-booking">Cancel a booking</a></p>

<script>
(function(){
  function apply(theme){
    document.body.dataset.theme = theme;
    try {
      var link = document.querySelector('link[rel="icon"]');
      if (link) link.href = theme==='dark' ? '/assets/wclub/favicon_dark.png' : '/assets/wclub/favicon_light.png';
      var logo = document.getElementById('logo');
      if (logo) logo.src = theme==='dark' ? '/assets/wclub/logo_dark.png' : '/assets/wclub/logo_light.png';
    } catch(e) {}
    localStorage.setItem('wclub_theme', theme);
  }
  const saved = localStorage.getItem('wclub_theme') || 'light';
  document.addEventListener('DOMContentLoaded', function(){
    apply(saved);
    var btn = document.getElementById('theme-toggle');
    if(btn){ btn.addEventListener('click', function(){
      apply(document.body.dataset.theme==='dark' ? 'light' : 'dark');
    });}
  });
})();
</script>
