<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
  <div><img id="logo" src="/assets/wclub/logo_light.png" alt="wClub" height="32"></div>
  <button id="theme-toggle">Switch Theme</button>
</div>
<link rel="icon" type="image/png" href="/assets/wclub/favicon_light.png">
<link rel="stylesheet" href="/assets/wclub/portal_theme.css">

{% set promotions = frappe.get_all("Promotion Record", filters={"owner": frappe.session.user}, fields=["name","member","from_level","to_level","date"], order_by="date desc") %}
<h2>My Certificates</h2>
<ul>
{% for p in promotions %}
  <li>{{ p.date }}: {{ p.member }} â†’ {{ p.to_level }} (<a href="/app/promotion-record/{{ p.name }}">view</a>)</li>
{% else %}
  <li>No certificates available.</li>
{% endfor %}
</ul>

<script>
(function(){
  function apply(theme){
    document.body.dataset.theme = theme;
    try {
      var link = document.querySelector('link[rel="icon"]');
      if (link) link.href = theme==='dark' ? '/assets/wclub/favicon_dark.png' : '/assets/wclub/favicon_light.png';
      var logo = document.getElementById('logo');
      if (logo) logo.src = theme==='dark' ? '/assets/wclub/logo_dark.png' : '/assets/wclub/logo_light.png';
    } catch(e) {}
    localStorage.setItem('wclub_theme', theme);
  }
  const saved = localStorage.getItem('wclub_theme') || 'light';
  document.addEventListener('DOMContentLoaded', function(){
    apply(saved);
    var btn = document.getElementById('theme-toggle');
    if(btn){ btn.addEventListener('click', function(){
      apply(document.body.dataset.theme==='dark' ? 'light' : 'dark');
    });}
  });
})();
</script>
